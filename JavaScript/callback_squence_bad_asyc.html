<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>잘못 처리된 비동기 방식</h1>

    <script>
        function buy_normal(item, price, quantity) {
            console.log(item + " 상품을 " + quantity + " 개 점원에게 주문요청")
            // setTimeout()함수가 매개변수로 익명함수를 제공받아 콜백함수 기능을 한다.
            setTimeout(function(){
                console.log("계산이 필요합니다.");
            let total = price * quantity;
            return total;
        }, 1000);
    }

        function pay(tot) {
            console.log(tot + "원을 지불함.");
        }
        // buy_normal() 함수가 호출시, 안에 setTimeout() 함수의 비동기적작업에 의해 pay(tot) 함수가 먼저 동작된다.
        let tot = buy_normal("사과", 500, 10); // 리턴값이 늦게 진행된다.
        pay(tot); // tot : undefined 값을 갖게 된다.

        // setTime() 함수가 비동기 성격이기 때문에, 값이 전달되기전에 밑에 코드가 진행된다.

        // 비동기적으로 잘못된 것을 처리할때
        // 비동기적으로 잘못된 예제 -> 콜백함수 (중첩될때 에러 찾기가 힘듦)
        // 비동기적으로 잘못된 예제 -> promise() 함수로 예제
    </script>
</body>
</html>